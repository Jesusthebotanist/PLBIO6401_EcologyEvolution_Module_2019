\% Linux, Alignment and Parsimony \% Jesus Martinez-Gomez \%
\texttt{s\ c(current\_date)} \% This worksheet will walk you through
some basic in Linux, aligning phylogenetic sequences with the program
MAFT then inferring a phylogeny using the program "Tree analysis New
Technology" (TNT). It also contains Homework question at the end.

\hypertarget{linux-basic}{%
\section{Linux Basic}\label{linux-basic}}

Linux is a operating system that phylogenetic programs are created with.
The Mac operating system is Linux based meaning that it runs Linux. The
Windows operatining system is now Linux based, therefore we need to
install Linux. These

\hypertarget{mac-instillation-instruction}{%
\subsection{Mac Instillation
Instruction}\label{mac-instillation-instruction}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Linux is already installed we just need to open it.
\item
  Look for the Terminal.app using your finder. It should be in the
  following location Applications/Utilities/Terminal.app
\item
  Be moral support for your classmates with Windows because its
  complicated.
\end{enumerate}

\hypertarget{windows-instillation-instruction}{%
\subsection{Windows Instillation
instruction}\label{windows-instillation-instruction}}

For Window user we are going to install a Linux virtual machine. In
essence this is a computer-in-computer. There are many benefits to
installing Linux as many program are Unix basic. These instruction are
for Windows 10 and they were taken from this
\href{https://www.bing.com/search?q=window+subsystem+for+linux\&pc=MOZI\&form=MOZLBR}{site}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Search for Windows PowerShell in Windows search bar, right click "Run
  as administrator"
\item
  Copy and paste the following into the Window:
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Enable}\OperatorTok{-}\NormalTok{WindowsOptionalFeature }\OperatorTok{-}\NormalTok{Online }\OperatorTok{-}\NormalTok{FeatureName Microsoft}\OperatorTok{-}\NormalTok{Windows}\OperatorTok{-}\NormalTok{Subsystem}\OperatorTok{-}\NormalTok{Linux }
\end{Highlighting}
\end{Shaded}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{2}
\tightlist
\item
  You will be prompted to restart your computer by pressing "Y", do so.
\item
  Open Microsoft Store using the Windows Search Bar.
\item
  Search for the program "Ubuntu" and download it.
\item
  Open "Ubuntu", you will be required to set a Username and Password.
  This password is different from your Windows login, \textbf{Make sure
  you don't forget it!}
\item
  You are done!
\end{enumerate}

\hypertarget{basic-linux-command}{%
\subsection{Basic Linux Command}\label{basic-linux-command}}

Now that we have Terminal open we will run through a few tips n' trick.
Terminal essentially allows you to navigate your computer through a
command line rather than a Folder system. In this section we will walk
you through creating a new folder and navigating around which is the
most basic function of Linux.

First of all it is important to figure out where you are. Type the
following, which stands for 'Print Working Directory'

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{pwd}
\end{Highlighting}
\end{Shaded}

Ever

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{ls}
\end{Highlighting}
\end{Shaded}

This should list all the files and folder in your current location. Mac
User will notice that you have a lot of files, this because Linux is
bulit into your computer and has access to all your files. Windows user
will have nothing. This is because, as we said before, you are running a
virtual machine (computer-in-a-computer), so you don't have any files.
Lets make a new directory.T he function "mkdir" is short for make
directory.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mkdir testFolder}
\NormalTok{ls}
\end{Highlighting}
\end{Shaded}

You should see that you just made a new directory called "testFolder".
Now let move into that new folder. We will use the function 'cd' which
stands for "change directory"

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{cd testFolder}
\end{Highlighting}
\end{Shaded}

We are now in testFolder! If we type 'ls', we will notice that there is
nothing. That is because we haven't made anything. Lets go back to our
previous directory using 'cd'

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{cd ..}
\end{Highlighting}
\end{Shaded}

Two periods after cd moves you up one step in directoryes. These
instructions are super basic but will get you started. This is a link to
a
\href{https://confluence.cornell.edu/display/CNF/Linux+CheatSheet}{Linux
cheat sheet}. If you want to learn more Linux google it.

\hypertarget{download-the-github-repository}{%
\section{Download the GitHub
Repository}\label{download-the-github-repository}}

All the material for this course are found on a Github repository. This
is essentially a cloud storage system that allows for version control
(very important but we don't cover). You can view this repository using
a browser by following the
\href{https://github.com/Jesusthebotanist/PLBIO6401_EcologyEvolution_Module_2019}{link}.

You can download the data using your browser but I will have you
download it using terminal Before you do this but first you need decide
a place put the folder. For Mac user I recommend putting it on your
Desktop, for Windows user I recommend putting it in your /home/
directory.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Using the skills you learn in the previous section navigate to the
  location you want to download the folder.
\item
  Use the following bit of code to download the data.
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{git clone https:}\OperatorTok{//}\NormalTok{github.com}\OperatorTok{/}\NormalTok{Jesusthebotanist}\OperatorTok{/}\NormalTok{PLBIO6401_EcologyEvolution_Module_2019.git}
\end{Highlighting}
\end{Shaded}

Using a finder check to see if you have successfull download the folder.
A folder called "PLBIO6401\_EcologyEvolution\_Module\_2019", should now
exist on your computer.

\hypertarget{getting-setting-up}{%
\section{Getting Setting UP}\label{getting-setting-up}}

Installing and getting programs to work can be a challenge.
Bioinformaticians spend a great deal of time simply getting a program to
run. These are general instructions and with the help of the instructors
we will get the program running on your machine. But first we will make
a new folder

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{cd PLBIO6401_EcologyEvolution_Module_2019}\OperatorTok{/}\NormalTok{Day1}
\NormalTok{mkdir My_first_Parsimony_Analysis}
\NormalTok{cd My_first_Parsimony_Analysis}
\end{Highlighting}
\end{Shaded}

\hypertarget{mac-user}{%
\subsection{Mac User}\label{mac-user}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Using Finder Navigate to PLBIO6401\_EcologyEvolution\_Module\_2019
\item
  Copy and paste the following programs into the folder
  My\_first\_Parsimony\_Analysis.

  \begin{itemize}
  \tightlist
  \item
    mafft-7.450-gcc\_fc6.x86\_64.rpm
  \item
    tnt-mac.command
  \end{itemize}
\item
  Copy and paste the file,
  "Ruhfel\_unaligned\_fasta/ruhf\_32\_by\_5000\_unaligned.fas" into the
  folder My\_first\_Parsimony\_Analysis
\end{enumerate}

\hypertarget{windows-user}{%
\subsection{Windows User}\label{windows-user}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Using Finder Navigate to PLBIO6401\_EcologyEvolution\_Module\_2019.
  Because
\end{enumerate}

\hypertarget{alignment-with-mafft}{%
\subsection{Alignment with MAFFT}\label{alignment-with-mafft}}

\hypertarget{tnt---parsimony}{%
\section{TNT - Parsimony}\label{tnt---parsimony}}

We will be inferring phylogenies using the program "Tree analysis New
Technology" (TNT). This is a command line program, which means in order
to run it you will use the "Terminal" app in Mac/ Linux or the "Command
Prompt" app in Windows. It is developed in part by Kevin Nixon a Plant
Biology faculty! The following is a worksheet that you can follow to
perform a basic parsimony analysis in TNT.

\hypertarget{introduction-to-tnt}{%
\subsection{Introduction to TNT}\label{introduction-to-tnt}}

As mentioned, TNT is a command line program meaning all inputs will be
through the command line (you'll feel like a hacker). An alternative is
to write script. A script is a simple text file that has all the
instructions (aka commands) you want a program to run. We will not go
through how to write a script, instead we will enter the commands one by
one into the command line. This section will introduce you to some TNT
basic and tips.

First a brief note on syntax. Most TNT commands are a simple word or
abbreviation, but in order to get the program to run them they must end
with a semi-colon ";". So for example, try typing in the following
command "help". You can simply copy and paste it into TNT.

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{help}\OperatorTok{;}
\end{Highlighting}
\end{Shaded}

The "help" command above will give you all list of all the commands that
TNT can run. Nifty. The "help" command can also be used to find
information about other commands. For example we will be using the
"mult" command later on in this workshop. To find out more information
about "mult". Type the following.

\begin{verbatim}
help mult;
\end{verbatim}

If you are ever unsure about what a particular command does always use
"help"

\hypertarget{tnt-analysis}{%
\subsection{TNT Analysis}\label{tnt-analysis}}

\hypertarget{setting-up-tnt-analysis}{%
\subsubsection{Setting Up TNT Analysis}\label{setting-up-tnt-analysis}}

We will now perform a basic parsimony inference. The first step is to
specify settings in TNT. The "log" commands will generate a text file,
(myLog.txt) that will keep track of all the subsequent commands you type
and the output TNT produces. It is a good coding practice to keep log
files, as they are a written history of the analysis you've done (future
you will thank you).

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{log myLog.txt}\OperatorTok{;}
\end{Highlighting}
\end{Shaded}

Look at the folder, a new file called myLog.txt should be in there. You
should be able to open this up by double clicking on it. It should be
empty right now, but will fill up after we are done. The second step is
to set the RAM memory usage. When TNT runs it takes up memory on your
computer, the default setting for TNT memory usage is low. We'll set it
to 200mb which is good for our tree size and no problem for a modern day
computer. If you are analyzing a large tree, consider setting the
memeory to something larger.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mxram }\DecValTok{200}\OperatorTok{;}
\end{Highlighting}
\end{Shaded}

The next step is to read in our data. Two important things to note:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Make sure your input file is in the correct format. TNT takes a
  special file a .tnt. Consult the TNT website for more detail on how to
  specify this file.
\item
  Make sure your input file is in the same folder as the tnt.command
  (Mac) or tnt.exc (Windows)file. It should be if your followed
  "Download TNT" instructions above.
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{p accD_aligned.tnt}\OperatorTok{;}
\end{Highlighting}
\end{Shaded}

TNT searches through tree space to find the most parsimonious tree or
set of most parsimonious trees. TNT searches through many many trees
most of which are not good (aka have a good parsimony score). Therefore
we don't want to save every single tree, instead we will use the "hold"
command to save the top 1000 trees.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hold }\DecValTok{1000}\OperatorTok{;}
\end{Highlighting}
\end{Shaded}

\hypertarget{basic-tnt-analysis}{%
\subsubsection{Basic TNT Analysis}\label{basic-tnt-analysis}}

We are ready to perform a basic parsimony tree search. We don't have
time to explain what these do, but Kevin Nixon recommend these steps for
good search. You may notice that instead of a single command there are
four in the following line of code. T

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Mult}\OperatorTok{;}\NormalTok{ Rat}\OperatorTok{;}\NormalTok{ Drift}\OperatorTok{;}\NormalTok{ Sect}\OperatorTok{;}
\end{Highlighting}
\end{Shaded}

This analysis may take a little while, and you will see some fun stuff
pop up on your screen. Once its done you can view your most parsimonious
phylogeny in your terminal window using the following code.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{tp}\OperatorTok{;}
\end{Highlighting}
\end{Shaded}

\hypertarget{exporting-and-quiting}{%
\subsubsection{Exporting and Quiting}\label{exporting-and-quiting}}

Now the we have successfully completed an analysis we may want to export
our best tree into a file for safe keeping. First we will use the
command "taxname=", TNT changes our tip name during this analysis,
"taxnames=" changes them back. Next we use the "export" command to
generate a .nex file, which stand for Nexus. A Nexus file is a standard
phylogenetic file.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{taxname}\OperatorTok{=;}
\NormalTok{export }\OperatorTok{-}\NormalTok{ myPhylogeny.nex}\OperatorTok{;}
\end{Highlighting}
\end{Shaded}

Double check to see if a file called myPhylogeny.nex was created.
Finally we can exit out of TNT using the "quit" command

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{quit}
\end{Highlighting}
\end{Shaded}

Open the myLog.txt file again (if you already have it open, close it
first), it should now be full of all the commands you inputed and the
TNT output! Yay phylogenies!

A final note. If you rerun the above code it will overwrite any files
that exist on your computer. If you are running a different analysis
make sure you change the names of the .log file and the .nex file

\hypertarget{viewing-your-phylogeny}{%
\subsection{Viewing your Phylogeny}\label{viewing-your-phylogeny}}

You should know have a .nex file in your folder. This .nex file contains
the phylogeny you just infered and can be view in a tree viewer. There
is a free Browser based tree viewer called
(IcyTree){[}https://icytree.org/{]}. Just drag and drop your .nex file
into the browser

\hypertarget{homework-quesitons}{%
\section{Homework Quesitons!}\label{homework-quesitons}}

\hypertarget{homework-question-1}{%
\subsection{Homework Question 1:}\label{homework-question-1}}

\hypertarget{homework-question-2}{%
\subsection{Homework Question 2:}\label{homework-question-2}}

\hypertarget{homework-questino-3}{%
\subsection{Homework Questino 3.}\label{homework-questino-3}}

\hypertarget{references}{%
\section{References}\label{references}}
